(–º–æ–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –∫–∞–∫ —è —ç—Ç–æ –≤–∏–∂—É - —é–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞-–≤–∏–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –∏ –Ω–∞–¥–ø–∏—Å—å —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º, –∏ –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ (–∞–Ω–≥–ª.–ø–æ—Ä—Ç—É–≥.—Ñ—Ä–∞–Ω—Ü.–∏—Å–ø–∞–Ω—Å–∫–∏–π)
–ü–æ—Å–ª–µ –≤—ãÔøΩÔøΩ–æ—Ä–∞ - –ø—Ä–µ–¥–ª–æ–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å –º–æ–Ω–µ—Ç—É –æ–ø–ª–∞—Ç—ã (xrp,trx,hbar) –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –º–æ–Ω–µ—Ç—ã - –ø–æ—è–≤–ª—è–µ—ÇÔøΩÔøΩ—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—à–µ–ª—å–∫–∞
(–ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –≤–≤–æ–¥–µ - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –æ—à–∏–±–∫–∏- –ø—Ä–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–º —Å–µ—Ç–∏ –º–æ–Ω–µ—Ç—ã –∫–æ—à–µ–ª—å–∫–µ, –∫–æ—à–µ–ª–µ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∑–∞ —ç—Ç–∏–º ID —Ç–≥ –∏ –ø—Ä–∏ –≤—ã–π–≥—Ä—ã—à–µ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∏–∑..
(–µ—Å–ª–∏ –ø–æ—Å–ª–µ —ç—Ç–æ—Ç –∂–µ ID –∑–∞—Ö–æ—á–µ—Ç –∫—É–ø–∏—Ç—å –¥—Ä—É–≥–∏–µ –±–∏–ª–µ—Ç—ã —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–Ω–µ—Ç–∞–º–∏ - –Ω–æ—É –ø—Ä–æ–±–ª–µ–º , —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ—à–µ–ª–µ–∫ -
–ø–æ—Å–ª–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ Nowpayments –Ω–∞ –æ–ø–ª–∞—Ç—É- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã —é–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—ã –∫—É–ø–∏–ª–∏ —Å—Ç–æ–ª—å–∫–æ—Ç–æ –±–∏–ª–µ—Ç–æ–≤, —É–¥–∞—á–∏!!
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∫–æ–ø–∏—Ç—Å—è –±–∞–Ω–∫ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–Ω—Ñ–æ –æ–± —é–∑–µ—Ä–µ. –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 10$ –ü–æ–∫–∞ –∫–∞–∂–¥—ã–π —á–µ—Ç–≤–µ—Ä–≥ –ø–æ –≤–µ–Ω–µ—Å—Å—É—ç–ª—å—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –≤ 20:00 –∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å -
—Å –ø–æ–º–æ—â—å—é –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ö—ç—à–∞ –±–∏—Ç–∫–æ–π–Ω–∞ –∏ —á–µ—Å—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—å!
 –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –µ–º—É –ø—Ä–∏–∑! –í–µ—Å—å –æ—Å—Ç–∞—Ç–æ–∫, –≤—Å–µ —á—Ç–æ —Å–≤—ã—à–µ 10$ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ Nowpay.. –ª–∏–±–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –Ω–∞ –¥–æ–º–∞—à–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ env.
–í –±–æ—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –æ–± —É—Å–ø–µ—à–Ω–æ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ, —Å –ø–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –Ω–∞–¥–ø–∏—Å—è–º–∏, —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ–±–µ–¥–Ω–æ–≥–æ —Ö—ç—à–∞ –∏ —á–∞—Å—Ç–∏—á–Ω–æ ID —é–∑–µ—Ä–∞!
 –ë–∏–ª–µ—Ç—ã –æ–±–Ω—É–ª—è–µ—Ç—Å—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ü–∏–∫–ª –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è! –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –≤ –±–∞–Ω–∫–µ 10$ –±–∞–Ω–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è,
–±–∏–ª–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è —Ä–∞–±–æ—á–∏–º–∏, –±\–≤ –±–æ—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –æ–±  –ø–µ—Ä–µ–Ω–æ—Å–µ –±–∞–Ω–∫–∞ –∏ –ø–æ–∂–µ–ª–∞–Ω–∏–∏ –≤—Å–µ–º —É–¥–∞—á–∏!!.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–∫—É–ø–∞—Ç—å –±–∏–ª–µ—Ç—ã –∑–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É, –∏ –∏—Ö –≤–∑–Ω–æ—Å—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –æ–±—â–µ–º
–±–∞–Ω–∫–µ. –ö–∞–∂–¥—ã–π —á–µ—Ç–≤–µ—Ä–≥ –≤ 20:00 –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ—Å—Ç–∏–≥ –ª–∏ –±–∞–Ω–∫ –ø–æ—Ä–æ–≥–∞ $10. –ï—Å–ª–∏ –¥–∞ ‚Äì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–∏ —á–µ—Å—Ç–Ω–æ (–±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞) —Ä–∞–∑—ã–≥—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–∑ $10 —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞
–Ω–µ–¥–µ–ª—é, –∞ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–≤–µ—Ä—Ö $10 –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –Ω–∞ –∫–æ—à–µ–ª—å–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤
–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. –ï—Å–ª–∏ –∂–µ –∫ —á–µ—Ç–≤–µ—Ä–≥—É –±–∞–Ω–∫ –º–µ–Ω—å—à–µ $10, —Ä–æ–∑—ã–≥—Ä—ã—à –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è (–±–∞–Ω–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞
—Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é –±–µ–∑ —Å–±—Ä–æ—Å–∞, –≤—Å–µ —Ä–∞–Ω–µ–µ –∫—É–ø–ª–µ–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏). –ó–∞—Ç–µ–º
—Ü–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Ç—Ä–µ–±—É–µ—Ç —É–¥–µ–ª–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º
–∞—Å–ø–µ–∫—Ç–∞–º: –Ω–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π (–Ω–µ –≤—ã–¥–∞–≤–∞—Ç—å –±–∏–ª–µ—Ç –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –æ–ø–ª–∞—Ç—ã),
—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –∏ –∏—Ö –±–∏–ª–µ—Ç–∞—Ö, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
—Ä–æ–∑—ã–≥—Ä—ã—à–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–∏–≥—Ä—ã—à–∞ –∏ –ø—Ä–∏–±—ã–ª–∏, –∞ —Ç–∞–∫–∂–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö. –ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ —ç—Ç–∏—Ö –∑–∞–¥–∞—á —Å —É—á—ë—Ç–æ–º
–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ (–±–æ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).
–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π –∏ –≤—ã–¥–∞—á–∞ –±–∏–ª–µ—Ç–æ–≤
–î–ª—è –ø—Ä–∏—ë–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π –≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ –∏ –≤—ã–¥–∞—á–∏ –ª–æ—Ç–µ—Ä–µ–π–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑, —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∏–∑–±–µ–∂–∞—Ç—å —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞–º–∏. –û—Ç–ª–∏—á–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–∏—Å
NOWPayments, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π API –¥–ª—è –ø—Ä–∏—ë–º–∞ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π 1 .
–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ 100 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ
—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ (IPN) –∏–ª–∏ –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ API. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤ —Ç–æ–º, —á—Ç–æ
NOWPayments –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –Ω–µ–±–µ–∑–∫–∞—Å—Ç–æ–¥–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (–Ω–µ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ —Å–≤–æ–µ–º
—Å—á—ë—Ç–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) –∏ —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–∏—ë–º/–æ—Ç–ø—Ä–∞–≤–∫—É –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã 2 . –ò—Å–ø–æ–ª—å–∑—É—è —Ç–∞–∫–æ–π —à–ª—é–∑,
–º–æ–∂–Ω–æ –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ–± –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ –±–ª–æ–∫—á–µ–π–Ω–∞ –≤—Ä—É—á–Ω—É—é ‚Äì API –æ–±–µ—Å–ø–µ—á–∏—Ç –±–µ–∑–æ—à–∏–±–æ—á–Ω–æ–µ
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π –±–∏–ª–µ—Ç–∞.
–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ –±–∏–ª–µ—Ç–∞: –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É /play (–∏–ª–∏
–Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É Play), –±–æ—Ç –¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–ª–∞—Ç–µ–∂–∞ –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –í –º–µ—Ç–æ–¥–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
/play
(–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ñ–∞–π–ª–µ
handlers/play.py ) –≤—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ –º–æ–¥—É–ª—è –ø–ª–∞—Ç–µ–∂–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä,
services/
payments.py ) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ API NOWPayments. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å
—Å—É–º–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, $0.10 ‚Äì –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å –∑–∞ –æ–¥–∏–Ω –±–∏–ª–µ—Ç, –∏—Å—Ö–æ–¥—è –∏–∑ —É—Å–ª–æ–≤–∏—è, —á—Ç–æ –ø–æ—Ä–æ–≥
$10 –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è 100 –±–∏–ª–µ—Ç–∞–º–∏ –ø–æ $0.10), –≤–∞–ª—é—Ç—É –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. API –≤–µ—Ä–Ω—ë—Ç
—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –æ–ø–ª–∞—Ç—ã –∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
—Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π: –Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´ü™ô –î–ª—è —É—á–∞—Å—Ç–∏—è –æ—Ç–ø—Ä–∞–≤—å—Ç–µ 0.10 USD –≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ X
–Ω–∞ –∞–¥—Ä–µ—Å: XYZ ¬ª. –ú–æ–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∞–¥—Ä–µ—Å –∏ QR-–∫–æ–¥, –∞ —Ç–∞–∫–∂–µ —É–∫–∞–∑–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ
–≤—Ä–µ–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 –º–∏–Ω—É—Ç) –Ω–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞. –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±–∏–ª–µ—Ç –µ—â–µ –Ω–µ
–≤—ã–¥–∞—ë—Ç—Å—è ‚Äì —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤.
12. –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã. –ü–æ—Å–ª–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –±–æ—Ç –¥–æ–ª–∂–µ–Ω
—Å–ª–µ–¥–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é. –ó–¥–µ—Å—å –µ—Å—Ç—å –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:
3. –ß–µ—Ä–µ–∑ IPN (Instant Payment Notification): –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å URL-–∞–¥—Ä–µ—Å
webhook‚Äô–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–µ—Ä–≤–∏—Å NOWPayments –≤—ã–∑–æ–≤–µ—Ç –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –æ–ø–ª–∞—Ç—ã. –î–ª—è —ç—Ç–æ–≥–æ –±–æ—Ç
–¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Endpoint
/nowpayments-ipn ). –í —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –±—É–¥–µ—Ç ID –ø–ª–∞—Ç–µ–∂–∞ –∏ —Å—Ç–∞—Ç—É—Å. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π
–∫–ª—é—á IPN (–∏–∑ .env) –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—Ç–µ–º –∑–Ω–∞–µ—Ç, —á—Ç–æ –ø–ª–∞—Ç–µ–∂ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å–ø–µ—à–Ω–æ
–ø–æ–ª—É—á–µ–Ω.
4. –ß–µ—Ä–µ–∑ –æ–ø—Ä–æ—Å API: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –º–æ–∂–Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ –ø–æ ID —Å
–ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ 10-15 —Å–µ–∫—É–Ω–¥). –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ —Ç–∞–π–º–∞—É—Ç–∞
(—Å–∫–∞–∂–µ–º, 1-2 –º–∏–Ω—É—Ç—ã) –±–æ—Ç –æ–∂–∏–¥–∞–µ—Ç —Å—Ç–∞—Ç—É—Å confirmed. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π ‚Äì –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ –æ–∂–∏–¥–∞–Ω–∏—è.
–í–∞–∂–Ω–æ: –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –±–æ—Ç–∞ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏! –°–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π
–ø–æ–¥—Ö–æ–¥. –í Aiogram –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ asyncio.create_task )
–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (—Å–º. —Ä–∞–∑–¥–µ–ª –æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏) —á—Ç–æ–±—ã —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ï—Å–ª–∏ –ø–æ
–∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–∞–π–º–∞—É—Ç–∞ –ø–ª–∞—Ç–µ–∂ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª—Å—è, –±–æ—Ç —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ¬´–û–ø–ª–∞—Ç–∞ –Ω–µ
–ø–æ–ª—É—á–µ–Ω–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.¬ª (–∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã –Ω–∞–±–ª—é–¥–∞–ª–∏) –∏ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç
–±–∏–ª–µ—Ç. –û–¥–Ω–∞–∫–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–æ–∂–Ω—ã—Ö –æ—Ç–∫–∞–∑–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–≤–µ—Ä—à–∏–ª –ø–ª–∞—Ç–µ–∂, –Ω–æ
–æ–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª—Å—è —Å–ø—É—Å—Ç—è –≤—Ä–µ–º—è), –ª—É—á—à–µ –∑–∞–ª–æ–∂–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–∂–∏–¥–∞–Ω–∏—è –∏/–∏–ª–∏ –ø—Ä–∏
–ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –ø–æ–∑–¥–Ω–µ–≥–æ IPN –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞—á–µ—Å—Ç—å –±–∏–ª–µ—Ç (–º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ–ø–æ–∑–¥–∞–≤—à–µ–µ
—Å–æ–æ–±—â–µ–Ω–∏–µ: ¬´ –ü–ª–∞—Ç–µ–∂ –ø–æ–ª—É—á–µ–Ω, –í–∞—à –±–∏–ª–µ—Ç —É—á—Ç–µ–Ω!¬ª).
1. –í—ã–¥–∞—á–∞ –ª–æ—Ç–µ—Ä–µ–π–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–¥–∞—Ç—å
–±–∏–ª–µ—Ç ‚Äì —Ç–æ –µ—Å—Ç—å –∑–∞–Ω–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∑–Ω–æ—Å–µ –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ,
–æ–¥–∏–Ω –±–∏–ª–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç $0.10 –≤–∑–Ω–æ—Å–∞ (–º–æ–∂–Ω–æ –∑–∞–ª–æ–∂–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
–±–∏–ª–µ—Ç–æ–≤ –æ–¥–Ω–∏–º –ø–ª–∞—Ç–µ–∂–æ–º, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª —Å—É–º–º—É –±–æ–ª—å—à–µ –º–∏–Ω–∏–º—É–º–∞).
–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª $0.30, –µ–º—É –¥–∞—ë—Ç—Å—è 3 –±–∏–ª–µ—Ç–∞. –í –∫–æ–¥–µ –º–æ–¥—É–ª—å
services/storage.py –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–∏—Å–ª–∞
–±–∏–ª–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–Ω–æ—Å–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
–±–∏–ª–µ—Ç–æ–≤, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´ –í–∞—à –ø–ª–∞—Ç–µ–∂ –Ω–∞ $0.10 –ø–æ–ª—É—á–µ–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 1 –ª–æ—Ç–µ—Ä–µ–π–Ω—ã–π
–±–∏–ª–µ—Ç. –£–¥–∞—á–∏ –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ!¬ª. (–ü—Ä–∏ –¥—Ä—É–≥–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ ‚Äì —É–∫–∞–∑—ã–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
–±–∏–ª–µ—Ç–æ–≤).
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫. –ù—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –ø–ª–∞—Ç–µ–∂ –æ—Ç–∫–ª–æ–Ω—ë–Ω –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
–≤–æ–≤—Å–µ –Ω–µ —Å–æ–≤–µ—Ä—à–∏–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é. –ï—Å–ª–∏ API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä,
–Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–øÔøΩÔøΩ–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞), –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ –∏
–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –ø–æ–∑–∂–µ. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª –æ–ø–ª–∞—Ç—É, –Ω–æ
–æ—Ç–ø—Ä–∞–≤–∏–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É –∏–ª–∏ –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å, –±–∏–ª–µ—Ç –Ω–µ –≤—ã–¥–∞—ë—Ç—Å—è ‚Äì —Ç–∞–∫–∏–µ
—Å–∏—Ç—É–∞—Ü–∏–∏ –ª—É—á—à–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å, —á—ë—Ç–∫–æ –¥–∞–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞. –°
NOWPayments –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫ –Ω–∏–∂–µ, —Ç.–∫. –∫–∞–∂–¥–æ–º—É –ø–ª–∞—Ç–µ–∂—É —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–π –∞–¥—Ä–µ—Å/
—Å—Å—ã–ª–∫–∞, –∏ –æ–ø–ª–∞—Ç–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
–í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã API-—à–ª—é–∑—É –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é ¬´–ø–æ–¥–∫–ª—é—á–∏—Ç—å
–∫–æ—à–µ–ª–µ–∫¬ª: —ç—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ –±—ã, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª–µ–∫ –∫ –∞–∫–∫–∞—É–Ω—Ç—É
(–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–ª—è—è –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –±–æ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç). –¢–æ–≥–¥–∞ –±–æ—Ç –º–æ–≥ –±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ
—Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –æ–¥–∏–Ω –æ–±—â–∏–π –∞–¥—Ä–µ—Å, —Ñ–∏–ª—å—Ç—Ä—É—è –ø–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è–º (—É–∑–Ω–∞–≤–∞—è –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π). –û–¥–Ω–∞–∫–æ, —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥ –Ω–µ–Ω–∞–¥–µ–∂–µ–Ω (–Ω–µ –≤—Å–µ –±–ª–æ–∫—á–µ–π–Ω—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–µ–≥–∫–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
2–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∞ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å –±–∏—Ä–∂–∏, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–≤—Å–µ–º —Ç–µ—Ä—è–µ—Ç—Å—è).
–ü–æ—ç—Ç–æ–º—É –ø—Ä—è–º–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API ‚Äì –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ
—Ä–µ—à–µ–Ω–∏–µ. –ö —Ç–æ–º—É –∂–µ, —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ—â–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É –Ω–∞
–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å, —á–µ–º –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø—Ä–∏–≤—è–∑–∫–æ–π –∫–æ—à–µ–ª—å–∫–∞. –í—ã–≤–æ–¥: –ø—Ä–∏–º–µ–Ω—è–µ–º NOWPayments
–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π ‚Äì —Ç–∞–∫ –¥–µ–ª–∞—é—Ç –º–Ω–æ–≥–∏–µ —É—Å–ø–µ—à–Ω—ã–µ
—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫—Ä–∏–ø—Ç–æ-–±–æ—Ç–æ–≤, –æ—Ç–º–µ—á–∞—è –ø—Ä–æ—Å—Ç–æ—Ç—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç–∞–∫–æ–≥–æ API 1 .
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ (—Ñ–∞–π–ª—ã –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è):
‚Ä¢ –§–∞–π–ª services/payments.py : –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
–ø–ª–∞—Ç–µ–∂–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, create_payment_request(user_id, amount_usd) ‚Äì —Å–æ–∑–¥–∞—ë—Ç
–Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ NOWPayments. –í–Ω—É—Ç—Ä–∏ –º–æ–∂–Ω–æ –∏—ÅÔøΩÔøΩ–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–±–æ –ø—Ä—è–º—ã–µ
HTTP-–∑–∞–ø—Ä–æ—Å—ã (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ requests –∏–ª–∏ AsyncIO-–∞–Ω–∞–ª–æ–≥) –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º NOWPayments,
–ª–∏–±–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Python SDK. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞: price_amount = 0.1,
price_currency = "usd" (–∑–∞–¥–∞—ë–º —Å—É–º–º—É –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö), pay_currency = "<—Å–∏–º–≤–æ–ª
–º–æ–Ω–µ—Ç—ã>" (–≤ –∫–∞–∫–æ–π –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ –ø—Ä–∏–Ω—è—Ç—å ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, "TRX" –¥–ª—è Tron, –ª–∏–±–æ
"USDTTRC20" –¥–ª—è USDT –≤ —Å–µ—Ç–∏ Tron, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–Ω–µ—Ç—ã, –∫–æ—Ç–æ—Ä—É—é –≤—ã –≤—ã–±—Ä–∞–ª–∏ –¥–ª—è
–ø—Ä–∏—ë–º–∞), –∞ —Ç–∞–∫–∂–µ ipn_callback_url = URL –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ IPN) –∏
order_id = –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –∏–Ω–æ–π ID –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞. API –≤–µ—Ä–Ω—ë—Ç
JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–∞ ‚Äì –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è: payment_id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–ª–∞—Ç–µ–∂–∞),
pay_address (–∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞, –∫—É–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∑–∞–ø–ª–∞—Ç–∏—Ç—å) –∏ pay_amount
(—Ç–æ—á–Ω–∞—è —Å—É–º–º–∞ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å, —Å —É—á—ë—Ç–æ–º –∫—É—Ä—Å–∞). –≠—Ç–∏
–¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≤—ã–∑—ã–≤–∞—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏.
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é check_payment_status(payment_id) , –∫–æ—Ç–æ—Ä–∞—è
–æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ API NOWPayments (–º–µ—Ç–æ–¥ GET Status) –∏ –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä,
waiting ‚Äì –æ–∂–∏–¥–∞–µ—Ç—Å—è, confirmed ‚Äì –ø–æ–ª—É—á–µ–Ω, failed ‚Äì –ø—Ä–æ—Å—Ä–æ—á–µ–Ω/–æ—Ç–∫–ª–æ–Ω—ë–Ω). –û–Ω–∞ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è,
–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º IPN, –∞ –¥–µ–ª–∞–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–æ—Å.
‚Ä¢ –§–∞–π–ª handlers/play.py : –∑–¥–µ—Å—å –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –ª–æ–≥–∏–∫—É –∫–æ–º–∞–Ω–¥—ã /play. –ê–ª–≥–æ—Ä–∏—Ç–º:
‚Ä¢ –í—ã–∑–≤–∞—Ç—å payment_info = payments.create_payment_request(user_id, 0.10) . –ï—Å–ª–∏
–≤–µ—Ä–Ω—É–ª—Å—è —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç, –∏–∑–≤–ª–µ—á—å –∏–∑ payment_info –∞–¥—Ä–µ—Å –∏ —Å—É–º–º—É.
‚Ä¢ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —ç—Ç–∏–º –∞–¥—Ä–µ—Å–æ–º. –ú–æ–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∞—Å–∏–≤–æ–µ
—Å–æ–æ–±—â–µ–Ω–∏–µ —Å Markdown:
–û—Ç–ø—Ä–∞–≤—å—Ç–µ **0.10 USD** –≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ X –Ω–∞ –∞–¥—Ä–µ—Å: `TG...` –¥–ª—è –ø–æ–∫—É–ø–∫–∏
–ª–æ—Ç–µ—Ä–µ–π–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞.
–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã –±–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç –≤—ã–¥–∞—á—É –±–∏–ª–µ—Ç–∞.
–ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å QR-–∫–æ–¥: –º–Ω–æ–≥–∏–µ –∫–æ—à–µ–ª—å–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR. (QR-–∫–æ–¥
–º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–¥—Ä–µ—Å–∞, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ qrcode).
‚Ä¢ –ù–∞—á–∞—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
–≤—ã–∑–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–∞—Å–∫:
asyncio.create_task(wait_for_payment(user_id,
payment_info['payment_id']))
3–≥–¥–µ wait_for_payment ‚Äì –∫–æ—Ä—É—Ç–∏–Ω–∞, –¥–µ–ª–∞—é—â–∞—è for i in range(N):
check_payment_status —Å –ø–∞—É–∑–æ–π. –ï—Å–ª–∏ check_payment_status –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
confirmed, —Ç–æ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–¥–∞—á–∏ –±–∏–ª–µ—Ç–∞ (—Å–º. –Ω–∏–∂–µ) –∏ –≤—ã—Ö–æ–¥–∏–º. –ï—Å–ª–∏ —Ü–∏–∫–ª
–∑–∞–≤–µ—Ä—à–∏–ª—Å—è –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äì —É–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–± –æ—à–∏–±–∫–µ.
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í Aiogram 3 –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º FSM (Finite State
Machine) –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ
—Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –æ—Ç –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã, –ø–æ—ç—Ç–æ–º—É FSM –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç.
–ü—Ä–∞–≤–∏–ª—å–Ω–µ–µ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å scheduler/IPN.
‚Ä¢ –§—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞—á–∏ –±–∏–ª–µ—Ç–∞: –Ω–∞–ø—Ä–∏–º–µ—Ä, storage.add_tickets(user_id, ticket_count) .
–ó–¥–µ—Å—å ticket_count = price_amount / 0.10 (—á–∏—Å–ª–æ –±–∏–ª–µ—Ç–æ–≤, –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –≤–Ω–µ—Å–µ–Ω–Ω—É—é
—Å—É–º–º—É). –í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ —Ü–µ–Ω–∞ –±–∏–ª–µ—Ç–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ ($0.10) –∏ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è
–∫—Ä–∞—Ç–Ω–æ —ç—Ç–æ–π —Å—É–º–º–µ. –ß—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –Ω–µ–∫—Ä–∞—Ç–Ω—ã–µ —Å—É–º–º—ã, –º–æ–∂–Ω–æ –ª–∏–±–æ –æ–∫—Ä—É–≥–ª—è—Ç—å
–≤ –º–µ–Ω—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É, –ª–∏–±–æ –≤–æ–æ–±—â–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ —Å—Ç—Ä–æ–≥–æ –Ω–∞ 0.10 (–æ–¥–∏–Ω –±–∏–ª–µ—Ç –∑–∞
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é). –ù–æ –ª—É—á—à–µ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–ª–∞—Ç–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞–∑–æ–º: —Ç–∞–∫ —É–º–µ–Ω—å—à–∞–µ–º –∫–æ–º–∏—Å—Å–∏–∏ —Å–µ—Ç–∏
–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –¢–æ–≥–¥–∞ ticket_count –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–∞–∫ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä,
$0.30 –¥–∞—é—Ç 3 –±–∏–ª–µ—Ç–∞). –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —ç—Ç–æ –≤ –±–∞–∑—É.
‚Ä¢ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–∫–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å –≤—ã—à–µ).
‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞
—Ç–∞–π–º–∞—É—Ç–∞:
–µ—Å–ª–∏
wait_for_payment
–∏—Å—Ç–µ–∫–ª–æ
–≤—Ä–µ–º—è,
–≤—ã–ø–æ–ª–Ω—è–µ–º
payments.cancel_payment(payment_id) (–µ—Å–ª–∏ API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ç–º–µ–Ω—É, –ª–∏–±–æ –ø—Ä–æ—Å—Ç–æ
–ø–æ–º–µ—á–∞–µ–º, —á—Ç–æ –∏—Å—Ç–µ–∫–ª–æ). –ò —É–≤–µ–¥–æ–ºÔøΩÔøΩ—è–µ–º: "–ü–ª–∞—Ç–µ–∂ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª". –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç
–æ—Ç–ø—Ä–∞–≤–∏—Ç—å /play –∑–∞–Ω–æ–≤–æ, –ø–æ–ª—É—á–∏–≤ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å. (–í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–∞—Ä—ã–π –∞–¥—Ä–µ—Å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤–∞–ª–∏–¥–µ–Ω
–∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è, –Ω–æ –ª—É—á—à–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç–∞–Ω–∏—Ü—É).
–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –±–∏–ª–µ—Ç –≤—ã–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤ ‚Äì
–∫–∞–∫ –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ú—ã –∏—Å–∫–ª—é—á–∞–µ–º —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –±–∏–ª–µ—Ç –≤—ã–¥–∞–Ω –∞–≤–∞–Ω—Å–æ–º (–¥–æ –æ–ø–ª–∞—Ç—ã), –∏–ª–∏
–¥—É–±–ª–∏–∫–∞—Ç—ã. –ü—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö (–º–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ
—Å–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–∞–≤–∏—Ç—Å—è: NOWPayments –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π, –∞ –±–æ—Ç
–¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–∂–∏–¥–∞–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–ø–æ—ç—Ç–æ–º—É
–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–∞).
–ù–∞–∫–æ–Ω–µ—Ü, —É—á–∏—Ç—ã–≤–∞—è –±—É–¥—É—â–µ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–∑–∞, —Å—Ç–æ–∏—Ç —ÉÔøΩÔøΩ–µ –Ω–∞ —ç—Ç–∞–ø–µ –æ–ø–ª–∞—Ç—ã –ø–æ–¥—É–º–∞—Ç—å –æ –∫–æ—à–µ–ª—å–∫–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤—ã–∏–≥—Ä—ã—à–∞. –í–∞—Ä–∏–∞–Ω—Ç: –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞—Ä–∞–Ω–µ–µ
–ø—Ä–∏–≤—è–∑–∞—Ç—å –∞–¥—Ä–µ—Å –¥–ª—è –≤—ã–ø–ª–∞—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É /setwallet , –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–¥—Ä–µ—Å —Å–≤–æ–µ–≥–æ –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–∞ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–≥–æ —Ç—É –º–æ–Ω–µ—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –ø—Ä–∏–∑).
–≠—Ç–æ—Ç –∞–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–∞–∑–µ (—Å–≤—è–∑–∞–Ω–Ω—ã–º —Å user_id). –¢–æ–≥–¥–∞ –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–æ—Ç–ø—Ä–∞–≤–∏—Ç –ø—Ä–∏–∑ –∏–º–µ–Ω–Ω–æ –Ω–∞ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–∫–∞–∑–∞–ª –∞–¥—Ä–µ—Å, –º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –µ–≥–æ
–ª–∏—à—å —É –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (–Ω–æ —ç—Ç–æ –∑–∞–¥–µ—Ä–∂–∫–∞ –∏ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è). –ë–æ–ª–µ–µ
–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äì —Å–æ–±—Ä–∞—Ç—å –∞–¥—Ä–µ—Å–∞ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞—Ä–∞–Ω–µ–µ. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ
wallet_address –≤ —Ç–∞–±–ª–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ñ—É–Ω–∫—Ü–∏—é storage.set_wallet(user_id,
address) , –≤—ã–∑—ã–≤–∞—Ç—å –µ–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ /setwallet (–Ω—É–∂–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∞–¥—Ä–µ—Å–∞!). –ü—Ä–∏
–≤—ã–¥–∞—á–µ –±–∏–ª–µ—Ç–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å: –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—â–µ –Ω–µ –∑–∞–¥–∞–Ω –∫–æ—à–µ–ª–µ–∫, –Ω–∞–ø–æ–º–Ω–∏—Ç—å
–∫–æ–º–∞–Ω–¥–æ–π —É–∫–∞–∑–∞—Ç—å –µ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–µ—Ç–µ–Ω–¥–æ–≤–∞—Ç—å –Ω–∞ –≤—ã–∏–≥—Ä—ã—à.
4–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, –∏—Ö –±–∏–ª–µ—Ç–∞—Ö –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±–∞–Ω–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å—Ç–æ–π—á–∏–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–ø—Ä–∞–≤–∏—Ç—Å—è —Å —Ä–æ—Å—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö. –ú–∏–ª–ª–∏–æ–Ω—ã
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏—Å–∫–ª—é—á–∞—é—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–æ –≤ –ø–∞–º—è—Ç–∏ –∏–ª–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö ‚Äì
–Ω—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –í —Å—Ä–µ–¥–µ Python —Ö–æ—Ä–æ—à–æ –∑–∞—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–∏ —Å–µ–±—è —Å–≤—è–∑–∫–∞
SQLAlchemy (ORM) –∏ –°–£–ë–î –≤—Ä–æ–¥–µ PostgreSQL. –ù–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å SQLite (—Ñ–∞–π–ª
–±–∞–∑—ã –Ω–∞ –¥–∏—Å–∫–µ) –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, –∞ –ø–æ—Ç–æ–º –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ë–î –±–µ–∑
–∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ ‚Äì ORM –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –°–£–ë–î 3 . –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä,
—Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Aiogram, —Å–æ—á–µ—Ç–∞—è SQLite –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ Postgres –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ 4 .
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: –Ω—É–∂–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü: - Users (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏):
—Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–µ. –ü–æ–ª—è: user_id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID Telegram, primary key),
username –∏–ª–∏ –∏–º—è (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è), wallet_address (–∫–æ—à–µ–ª–µ–∫ –¥–ª—è
–≤—ã–ø–ª–∞—Ç –ø—Ä–∏–∑–∞, –º–æ–∂–µ—Ç –±—ã—Ç—å NULL, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω),
tickets
–±–∏–ª–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–µ–∫—É—â–µ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ), –≤–æ–∑–º–æ–∂–Ω–æ,
(–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–∫—É—â–∏—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö
language
(–¥–ª—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã—Ö
—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, —Ä–∞–∑ —É –≤–∞—Å –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏). –ü–æ–ª–µ tickets –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ
–ø–æ–∫—É–ø–æ–∫ –∏ –æ–±–Ω—É–ª—è—Ç—å—Å—è/—Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –≤—ã–∏–≥—Ä—ã—à–∞ (—Å–º. –Ω–∏–∂–µ –ø—Ä–æ —Ä–∞—É–Ω–¥—ã). –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ,
–º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –±–∏–ª–µ—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É Entries. - Lottery (—Ç–µ–∫—É—â–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à/–±–∞–Ω–∫):
–º–æ–∂–Ω–æ –∑–∞–≤–µ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —É—á–µ—Ç–∞ –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –±–∞–Ω–∫–∞ –∏ —ç—Ç–∞–ø–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞. –ü–æ–ª—è:
lottery_id (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–∞—É–Ω–¥–∞), start_time (–∫–æ–≥–¥–∞ –Ω–∞—á–∞–ª —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –±–∞–Ω–∫), draw_time
(–∫–æ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å—Å—è —Ä–æ–∑—ã–≥—Ä—ã—à, –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω), prize_amount ($10 –æ–±—ã—á–Ω–æ),
status (–Ω–∞–ø—Ä–∏–º–µ—Ä, "active" –∏–ª–∏ "completed"), winner_user_id (–µ—Å–ª–∏ —Ä–æ–∑—ã–≥—Ä—ã—à —Å–æ—Å—Ç–æ—è–ª—Å—è),
total_collected (—Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ —Å–æ–±—Ä–∞–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤). –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –±–∞–Ω–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é,
–≤–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–∞—É–Ω–¥–∞, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–ª—è—Ç—å —Ä–∞—É–Ω–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º –¥–æ–ª—å—à–µ –∏–ª–∏ –æ—Ç–º–µ—á–∞—Ç—å status =
rolled –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞—É–Ω–¥, –ø–µ—Ä–µ–Ω–æ—Å—è —Å—É–º–º—É. –û–¥–Ω–∞–∫–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–æ—â–µ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —Ä–∞—É–Ω–¥
–¥–ª–∏—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ —Ä–∞–∑—ã–≥—Ä–∞–Ω –ø—Ä–∏–∑. –¢–æ –µ—Å—Ç—å –º–æ–∂–µ—Ç –¥–ª–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å. –¢–æ–≥–¥–∞ –ø–æ–ª—è
start_time –∏ draw_time –Ω–µ —Å—Ç–æÔøΩÔøΩ—å –≤–∞–∂–Ω—ã, –º—ã –ø—Ä–æ—Å—Ç–æ –∑–Ω–∞–µ–º, —á—Ç–æ —Ç–µ–∫—É—â–∏–π —Ä–∞—É–Ω–¥ –∞–∫—Ç–∏–≤–µ–Ω.
–ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å
draw_time
–∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é +7 –¥–Ω–µ–π, –ø–æ–∫–∞ –Ω–µ —Ä–∞–∑—ã–≥—Ä–∞–µ—Ç—Å—è. - Payments
(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): —Ç–∞–±–ª–∏—Ü–∞ –ø–ª–∞—Ç–µ–∂–µ–π ‚Äî —Ö—Ä–∞–Ω–∏—Ç –∫–∞–∂–¥—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é:
amount_usd ,
crypto_amount ,
status ,
pay_id ,
user_id ,
timestamp . –û–Ω–∞ –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏
(–º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å, –∫—Ç–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–ª–∞—Ç–∏–ª). –î–ª—è –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞, —Ç.–∫. –∏—Ç–æ–≥ –ø–æ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –º—ã —Ö—Ä–∞–Ω–∏–º –≤ tickets .
–í–∞–∂–Ω–æ —Ä–µ—à–∏—Ç—å, –∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∏–ª–µ—Ç–∞—Ö –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏. –ö–æ–≥–¥–∞ —Ä–æ–∑—ã–≥—Ä—ã—à —Å–æ—Å—Ç–æ—è–ª—Å—è –∏
–ø—Ä–∏–∑ –≤—ã–¥–∞–Ω, –≤—Å–µ —É—á–∞—Å—Ç–≤–æ–≤–∞–≤—à–∏–µ –±–∏–ª–µ—Ç—ã —Å–≥–æ—Ä–∞—é—Ç, –∞ –Ω–æ–≤—ã–π —Å–±–æ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç —Å –Ω—É–ª—è. –ú—ã –¥–æ–ª–∂–Ω—ã –ª–∏–±–æ
–æ–±–Ω—É–ª–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ tickets —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ª–∏–±–æ –∑–∞–≤–µ—Å—Ç–∏ –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å —Ä–∞—É–Ω–¥–∞ –∏ –Ω–æ–≤—É—é
–ø–∞—Ä—Ç–∏—é –∑–∞–ø–∏—Å–µ–π –±–∏–ª–µ—Ç–æ–≤. –í–æ–∑–º–æ–∂–Ω—ã –ø–æ–¥—Ö–æ–¥—ã: - –û–±–Ω—É–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤: –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø–æ—Å–ª–µ
—Ä–æ–∑—ã–≥—Ä—ã—à–∞ –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º –∑–∞–ø–∏—Å—è–º Users –∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å tickets = 0 (–∏–ª–∏ —É–¥–∞–ª–∏—Ç—å
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ–≥–æ –±—ã–ª–æ >0 ‚Äì –Ω–æ –ª—É—á—à–µ –Ω–µ —É–¥–∞–ª—è—Ç—å, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å—Ç–æ—Ä–∏—é
—É—á–∞—Å—Ç–∏—è –∏–ª–∏ –∏—Ö –∫–æ—à–µ–ª—å–∫–∏). –û–¥–Ω–∞–∫–æ, –æ–±—Ö–æ–¥ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Å—Ç—Ä–æ–∫ –∏ –∑–∞–ø–∏—Å—å –∏–º 0 ‚Äì –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–∞—è.
–ù–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π UPDATE Users SET tickets=0 ‚Äì —ç—Ç–æ
—Å–±—Ä–æ—Å–∏—Ç –±—ã—Å—Ç—Ä–æ, –Ω–æ –ø—Ä–∏ –º–∏–ª–ª–∏–æ–Ω–∞—Ö —Å—Ç—Ä–æ–∫ —Ç–æ–∂–µ –∑–∞–π–º–µ—Ç –≤—Ä–µ–º—è/–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –í –ø—Ä–∏–Ω—Ü–∏–ø–µ, —Ä–∞–∑ –≤
–Ω–µ–¥–µ–ª—é —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ. - –û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Entries: —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä—ã (user_id, lottery_id, tickets).
–¢–æ–≥–¥–∞ –¥–ª—è –Ω–æ–≤ÔøΩÔøΩ–≥–æ —Ä–∞—É–Ω–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å Lottery, –∏ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫—É–ø–∞–µ—Ç –±–∏–ª–µ—Ç—ã,
–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ Entries —Å —Ç–µ–∫—É—â–∏–º lottery_id. –ö–æ–≥–¥–∞ —Ä–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à—ë–Ω, —Ç–∞–±–ª–∏—Ü–∞
Entries –¥–ª—è —ç—Ç–æ–≥–æ —Ä–∞—É–Ω–¥–∞ –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç—Å—è (–æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—è, –ª–∏–±–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏
—Å—Ç–∞—Ä–æ–≥–æ —Ä–∞—É–Ω–¥–∞, —Ç.–∫. –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã —É–∂–µ). –≠—Ç–æ –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚Äì –ø—Ä–æ—Å—Ç–æ
–Ω–∞—á–∏–Ω–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ª—É—á—à–µ,
–Ω–æ –Ω–µ–º–Ω–æ–≥–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥ (–Ω—É–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–µ–∫—É—â–µ–º—É lottery_id –∫–∞–∂–¥—ã–π —Ä–∞–∑). -
5–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ: –º–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –±–∏–ª–µ—Ç—ã —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –∏—Å—Ç–æ—Ä–∏—é –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –≤–æ–≤—Å–µ
(–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è). –ï—Å–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–µ –Ω—É–∂–Ω–∞, –º–æ–∂–Ω–æ –ø–æ—Å–ª–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∞
–¥–∞–∂–µ –¥—Ä–æ–ø–Ω—É—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É Entries. –û–¥–Ω–∞–∫–æ, —ç—Ç–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ –¥–µ–ª–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äì
–ª—É—á—à–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å truncate.
–í —Ü–µ–ª—è—Ö –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å —Å —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –±–∞–Ω–∫–∞ –∏ –±–∏–ª–µ—Ç–æ–≤ –∫–∞–∫
–µ–¥–∏–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –±–µ–∑ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏: - –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏–ª–∏ –∑–∞–ø–∏—Å—å –≤
–ë–î –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –æ–±—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –±–∞–Ω–∫–∞. –ù–æ –ª—É—á—à–µ –≤—ã—á–∏—Å–ª—è—Ç—å –±–∞–ª–∞–Ω—Å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –±–∏–ª–µ—Ç–æ–≤ *
0.1$ ‚Äì –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ. - –ö–∞–∂–¥–∞—è –æ–ø–ª–∞—Ç–∞ —Å—Ä–∞–∑—É —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç users.tickets –∏, –ø—Ä–∏
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –º–æ–∂–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫ –æ–±—â–µ–≥–æ –±–∞–Ω–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ç–∞–±–ª–∏—Ü–µ
Lottery –ø–æ–ª–µ total_collected). –ù–æ —Å—É–º–º–∞ –±–∞–Ω–∫–∞ = 0.1 * —Å—É–º–º–∞—Ä–Ω—ã–µ tickets —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. - –î–ª—è
–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä–æ–≥–∞ $10 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å sum(tickets)*0.1 >= 10. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å–æ–º
SELECT SUM(tickets) FROM Users . - –î–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å
–∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –±–∏–ª–µ—Ç–æ–≤ ‚Äì –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å, –≤–æ–∑–º–æ–∂–Ω–æ, –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫. –û–± —ç—Ç–æ–º –¥–∞–ª–µ–µ.
–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –±–∞–∑—ã: - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SQLite –Ω–∞ –ø–µ—Ä–≤—ã—Ö –ø–æ—Ä–∞—Ö –¥–æ–ø—É—Å—Ç–∏–º–æ, –Ω–æ –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ
SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫–æ–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å. –û–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å—é –ë–î –Ω–∞ –∑–∞–ø–∏—Å—å
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –¥–µ—Å—è—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞–ª–∏ –±–∏–ª–µ—Ç—ã, –≤–æ–∑–º–æ–∂–Ω—ã
–Ω–µ–±–æ–ª—å—à–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏, —Ö–æ—Ç—è –æ–±—ã—á–Ω–æ SQLite —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—â–∏–º–∏
–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏—Ö –≤—ã–ø–æ–ª–Ω—è—è. –î–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –ø—Ä–∏–µ–º–ª–µ–º–æ, –Ω–æ –¥–ª—è –º–∏–ª–ª–∏–æ–Ω–∞
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ª—É—á—à–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ PostgreSQL –∏–ª–∏ MySQL, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ
–∑–∞–ø–∏—Å–∏ –∏ –±–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö. - –ß—Ç–æ–±—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø–µ—Ä–µ—Ö–æ–¥—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ORM
(SQLAlchemy). –í –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ Aiogram+SQLAlchemy –∏–º–µ–Ω–Ω–æ —Ç–∞–∫ –∏ –¥–µ–ª–∞—é—Ç: —Ä–∞–±–æ—Ç–∞—é—Ç —Å SQLite,
–Ω–æ –∫–æ–¥ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å PostgreSQL 3 . –í—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä,
—Å sqlite:///data/db.sqlite –Ω–∞ URL postgres) –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–µ–∑ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–∏–∫–∏. -
–î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è: user_id (PRIMARY KEY —É–∂–µ –∏–Ω–¥–µ–∫—Å), –≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞ lottery_id –≤
Entries, –µ—Å–ª–∏ –±—É–¥–µ—Ç, –∏ —Ç.–¥., —á—Ç–æ–±—ã –≤—ã–±–æ—Ä–∫–∏ –±—ã–ª–∏ –±—ã—Å—Ç—Ä—ã–º–∏. - –£—á—Ç–∏—Ç–µ, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ –º–∏–ª–ª–∏–æ–Ω–∞–º
–∑–∞–ø–∏—Å–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–±—Ä–æ—Å –±–∏–ª–µ—Ç–æ–≤) –ª—É—á—à–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤–Ω–µ –ø–∏–∫–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∏–ª–∏ –¥–µ–ª–∞—Ç—å —ç—Ç–æ
–∞–∫–∫—É—Ä–∞—Ç–Ω–æ. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–±—Ä–æ—Å —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é ‚Äì –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∞ –Ω–æ—á—å—é,
–∫–æ–≥–¥–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞.
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è (—Ñ–∞–π–ª—ã): - –§–∞–π–ª
services/storage.py : –∑–¥–µ—Å—å –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
–∫–ª–∞—Å—Å-–æ–±–µ—Ä—Ç–∫—É –Ω–∞–¥ –ë–î. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–∏–ª–∏
sqlite3
–Ω–∞–ø—Ä—è–º—É—é, –∏–ª–∏
aiosqlite
–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SQLAlchemy. - –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ) —Å–ª–µ–¥—É–µ—Ç –≤—ã–∑–≤–∞—Ç—å
–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ë–î: –∑–∞–≥—Ä—É–∑–∏—Ç—å .env (–¥–ª—è –ø—É—Ç–∏ –∏–ª–∏ URL –ë–î, –µ—Å–ª–∏ –Ω–∞–¥–æ), –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è/—Å–æ–∑–¥–∞—Ç—å
—Ñ–∞–π–ª—ã, —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç (–ø—Ä–∏ SQLite –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å CREATE TABLE IF NOT
EXISTS ).
-
–§—É–Ω–∫—Ü–∏–∏:
add_tickets(user_id,
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –µ—Å—Ç—å ( SELECT
tickets
FROM
count) :
Users
–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç
WHERE
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é,
user_id
=
-
–µ—Å–ª–∏
? ), —Ç–æ –¥–µ–ª–∞–µ—Ç
UPDATE Users SET tickets = tickets + ? WHERE user_id = ? . - –µ—Å–ª–∏ –Ω–µ—Ç ‚Äì –¥–µ–ª–∞–µ—Ç
INSERT INTO Users(user_id, tickets, ...) VALUES(?, ?, ...) . - –¢–∞–∫–∂–µ, –º–æ–∂–Ω–æ —Ç—É—Ç –∂–µ
–æ–±–Ω–æ–≤–∏—Ç—å –æ–±—â–∏–π —Å—á—ë—Ç—á–∏–∫ –±–∞–Ω–∫–∞: UPDATE Lottery SET total_collected = total_collected
+ ? (–≥–¥–µ ? = count * 0.10 ). –ù–æ –∫–∞–∫ —É–ø–æ–º—è–Ω—É—Ç–æ, —Å—É–º–º–∞—Ä–Ω–æ–µ —á–∏—Å–ª–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —á–µ—Ä–µ–∑ SUM
–ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ, –ø–æ—ç—Ç–æ–º—É –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π. –î–ª—è
–±—ã—Å—Ç—Ä–æ—Ç—ã, –æ–¥–Ω–∞–∫–æ, –º–æ–∂–Ω–æ –≤–µ—Å—Ç–∏. - get_total_tickets() : –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç SUM(tickets) –∏–∑ Users
(–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ >=100 (—á—Ç–æ —Ä–∞–≤–Ω–æ $10)). - get_participants() : –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—ÅÔøΩÔøΩ–∫ (user_id,
tickets)
–≤—Å–µ—Ö
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π,
—É
–∫–æ—Ç–æ—Ä—ã—Ö
tickets
>
0 .
(–í
—Ç–µ–∫—É—â–µ–º
—Ä–∞—É–Ω–¥–µ).
-
reset_tickets() : –æ–±–Ω—É–ª—è–µ—Ç –ø–æ–ª–µ tickets —É –≤—Å–µ—Ö (–ª–∏–±–æ —É–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ Users —á—Ç–æ–±—ã –Ω–∞—á–∞–ª–∏—Å—å
–∑–∞–Ω–æ–≤–æ ‚Äì –Ω–æ —Ç–æ–≥–¥–∞ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ –∏ —É–¥–æ–±—Å—Ç–≤–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è username; –ª—É—á—à–µ
–æ–±–Ω—É–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ tickets). - set_wallet(user_id, address) : –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ –∫–æ—à–µ–ª—å–∫–∞. - (–ï—Å–ª–∏
6–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∞–±–ª–∏—Ü—É Entries, —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç —á—É—Ç—å –∏–Ω–∞—á–µ: –¥–æ–±–∞–≤–ª—è—Ç—å/–∏–∑–º–µ–Ω—è—Ç—å –∑–∞–ø–∏—Å—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º
lottery_id, –≤—ã–±–æ—Ä–∫–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Ç–æ–∂–µ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º lottery_id, –∏ —É–¥–∞–ª—è—Ç—å/–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ).
‚Ä¢ –ó–∞–º–µ—á–∞–Ω–∏–µ: –ï—Å–ª–∏ —Ä–µ—à–∏—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å–∏ Payments, —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∫–∞–∂–¥—É—é —É—Å–ø–µ—à–Ω—É—é –æ–ø–ªÔøΩÔøΩ—Ç—É
–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ç—É–¥–∞ (–≤ add_tickets –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤, —Å–¥–µ–ª–∞—Ç—å INSERT INTO
Payments(...) ). –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–µ–Ω—å–≥–∏ –≤ —Å–ª—É—á–∞–µ –æ—Ç–º–µ–Ω—ã, –Ω–æ –≤
—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö –Ω–µ –±—ã–ª–æ –≤–æ–∑–≤—Ä–∞—Ç–∞, —Ç.–∫. –ø–æ —É—Å–ª–æ–≤–∏—è–º –ª–æ—Ç–µ—Ä–µ–∏ –Ω–µ—Ç –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–º –≤–æ–∑–≤—Ä–∞—Ç–∞.
–í –∏—Ç–æ–≥–µ, –Ω–∞–¥—ë–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–±–µ—Å–ø–µ—á–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –¥–∞–∂–µ –ø—Ä–∏ –µ–≥–æ
–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö (–≤—Å–µ –ø–æ–∫—É–ø–∫–∏ –±–∏–ª–µ—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è). –¢.–∫. –±–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –±–∞–∑–∞
–±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏ ‚Äì –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∏–ª–∏ –æ—á–∏—Å—Ç–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª—è—Ç—å
–∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—ã—Ö —Ä–∞—É–Ω–¥–æ–≤, –µ—Å–ª–∏ –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è). –ù–æ –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω: –¥–∞–∂–µ 1 –º–∏–ª–ª–∏–æ–Ω
–∑–∞–ø–∏—Å–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —Å –±–∏–ª–µ—Ç–∞–º–∏ ‚Äì —ç—Ç–æ –≤–ø–æ–ª–Ω–µ –ø–æ—Å–∏–ª—å–Ω–æ –¥–ª—è PostgreSQL –Ω–∞ —Å—Ä–µ–¥–Ω–µ–º —Å–µ—Ä–≤–µ—Ä–µ.
–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è: –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –ø–æ–º–Ω–∏—Ç—å –æ —Ä–æ–∑—ã–≥—Ä—ã—à–µ,
–±–æ—Ç –¥–æ–ª–∂–µ–Ω —Å–∞–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –±–∞–Ω–∫–∞ –∫–∞–∂–¥—ã–π —á–µ—Ç–≤–µ—Ä–≥ –≤ 20:00 –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ä–æ–∑—ã–≥—Ä—ã—à –ø—Ä–∏
–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞. –ü–æ—Å–∫–æ–ª—å–∫—É Telegram-–±–æ—Ç (–≤ —Ä–µ–∂–∏–º–µ long polling) —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–µ –∏–º–µ–µ—Ç –ø–æ–Ω—è—Ç–∏—è
—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, –Ω–∞–º –Ω—É–∂–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é. –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–±–∏–±–ª–∏–æ—Ç–µ–∫—É APScheduler (Advanced Python Scheduler) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π AsyncIO, –∫–æ—Ç–æ—Ä–∞—è —Ö–æ—Ä–æ—à–æ
—Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ aiogram-–±–æ—Ç–∞ 5 . –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Ç–º–µ—á–∞—é—Ç, —á—Ç–æ APScheduler —É–¥–æ–±–Ω–æ
–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –≤ Telegram-–±–æ—Ç–∞—Ö 5 .
–ú—ã –º–æ–∂–µ–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–∂–æ–± —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å apscheduler
(–ΩÔøΩÔøΩ–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –≤ requirements). - –í –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ –±–æ—Ç–∞ (–≥–¥–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä) –ø—Ä–∏
—Å—Ç–∞—Ä—Ç–µ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä AsyncIOScheduler :
from apscheduler.schedulers.asyncio import AsyncIOScheduler
scheduler = AsyncIOScheduler()
- –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É —Ä–æ–∑—ã–≥—Ä—ã—à–∞:
scheduler.add_job(draw_lottery, 'cron', day_of_week='thu', hour=20, minute=0)
–ó–¥–µ—Å—å draw_lottery ‚Äì —Ñ—É–Ω–∫—Ü–∏—è (–∫–æ—Ä—É—Ç–∏–Ω–∞), –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ä–æ–∑—ã–≥—Ä—ã—à–∞.
–¢—Ä–∏–≥–≥–µ—Ä cron –∑–∞–¥–∞–Ω –Ω–∞ –∫–∞–∂–¥—ã–π —á–µ—Ç–≤–µ—Ä–≥ 20:00. (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Ä–µ–º—è UTC, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å
timezone="Europe/Moscow" –∏–ª–∏ –¥—Ä—É–≥–æ–π, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è.) - –ó–∞–ø—É—Å—Ç–∏—Ç—å
–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: scheduler.start() . - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫
–±–æ—Ç –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ–ª–±—ç–∫–µ on_startup Aiogram). Aiogram 2.x –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å
on_startup —Ñ—É–Ω–∫—Ü–∏—é –≤ executor.start_polling , –∞ –≤ Aiogram 3.x –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å
scheduler.start() –ø–æ—Å–ª–µ dp.start_polling() –µ—Å–ª–∏ –æ–Ω async, –∏–ª–∏ —Ç–æ–∂–µ —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª.
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, APScheduler —Å–æ–∑–¥–∞—Å—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é –∑–∞–¥–∞—á—É –≤ event loop, –∫–æ—Ç–æ—Ä–∞—è —Ç–æ—á–Ω–æ –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ
–≤—Ä–µ–º—è –≤—ã–∑–æ–≤–µ—Ç –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é —Ä–æ–∑—ã–≥—Ä—ã—à–∞. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ä–æ–∑—ã–≥—Ä—ã—à –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç (–µ—Å–ª–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω). –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ APScheduler
–∑–∞–Ω–æ–≤–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á—É, –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤—Ä–µ–º—è next run –±—ã–ª–æ –≤—ã—á–∏—Å–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–≤
cron —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞).
7–¢–µ–ø–µ—Ä—å, —Ñ—É–Ω–∫—Ü–∏—è —Ä–æ–∑—ã–≥—Ä—ã—à–∞ draw_lottery (–µ—ë –º–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å, –∫ –ø—Ä–∏–º–µ—Ä—É, –≤ services/
lottery.py –∏–ª–∏ –ø—Ä—è–º–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ) –¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ: 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–∞ –±–∞–Ω–∫–∞. –ß–µ—Ä–µ–∑
storage.get_total_tickets()
–ø–æ–ª—É—á–∞–µ–º –æ–±—â–µ–µ —á–∏—Å–ª–æ –±–∏–ª–µ—Ç–æ–≤ (–∏–ª–∏ —Å—É–º–º—É —Å—Ä–µ–¥—Å—Ç–≤). –ï—Å–ª–∏
—Å—É–º–º–∞ –º–µ–Ω—å—à–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, < 100 –±–∏–ª–µ—Ç–æ–≤, —á—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç $10), —Ç–æ: - –†–æ–∑—ã–≥—Ä—ã—à –Ω–µ
–ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è. –ù—É–∂–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–µÔøΩÔøΩ–µ–Ω–æ—Å: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–µ—Ä–µ–Ω–æ—Å–µ (–æ–± —ç—Ç–æ–º –≤
—Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ). –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –±–∞–∑–µ (–±–∏–ª–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥). –ú–æ–∂–Ω–æ
–ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∞—Ç—å, —á—Ç–æ "—Ä–æ–∑—ã–≥—Ä—ã—à –Ω–µ —Å–æ—Å—Ç–æ—è–ª—Å—è –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ" –≤ –ª–æ–≥ –∏–ª–∏ —Ç–∞–±–ª–∏—Ü—É Lottery
(–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ draw_time -> +7 –¥–Ω–µ–π). - –ó–∞–≤–µ—Ä—à–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é. (Scheduler
–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç –µ—ë —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é, –≥–¥–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏
–¥–∞–Ω–Ω—ã–º–∏). 2. –ï—Å–ª–∏ —Å—É–º–º–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ –∏–ª–∏ –ø—Ä–µ–≤—ã—Å–∏–ªÔøΩÔøΩ $10 (‚â• 100 –±–∏–ª–µ—Ç–æ–≤): - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
–ø–æ–±–µ–¥–∏—Ç–µ–ª—è. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤,
–ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —á–∏—Å–ª—É –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, —É –∫–æ–≥–æ –±–æ–ª—å—à–µ –±–∏–ª–µ—Ç–æ–≤, —É —Ç–æ–≥–æ –≤—ã—à–µ
—à–∞–Ω—Å (–∫–∞–∂–¥—ã–π –±–∏–ª–µ—Ç ‚Äì –æ–¥–∏–Ω "–ª–æ—Ç–µ—Ä–µ–π–Ω—ã–π –∫–æ–¥" –≤ –±–∞—Ä–∞–±–∞–Ω–µ). - –î–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫
—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –∏—Ö –±–∏–ª–µ—Ç–æ–≤: participants = storage.get_participants() , –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π,
–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π (user_id, tickets) . (–ï—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ, —É–±–µ–¥–∏—Ç–µ—Å—å,
—á—Ç–æ —ç—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏. –ú–∏–ª–ª–∏–æ–Ω –∑–∞–ø–∏—Å–µ–π ‚Äì ÔøΩÔøΩ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
–º–µ–≥–∞–±–∞–π—Ç, —á—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ú–æ–∂–Ω–æ –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –∫—É—Ä—Å–æ—Ä—É –ë–î, –Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –Ω—É–∂–µ–Ω
–≤–µ—Å—å –Ω–∞–±–æ—Ä –∏–ª–∏ —Å—É–º–º–∞—Ä–Ω–∞—è –¥–ª–∏–Ω–∞). - –ü—Ä–∏–º–µ–Ω—è–µ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä ( random.SystemRandom –∏–ª–∏ –º–æ–¥—É–ª—å secrets ), —á—Ç–æ–±—ã
—Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —á–µ—Å—Ç–Ω—ã–º –∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º. –û–¥–Ω–∞–∫–æ, Python
random
–±–µ–∑
—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ seed —Ç–æ–∂–µ –ø–æ–¥—Ö–æ–¥–∏—Ç (seed —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏). –ì–ª–∞–≤–Ω–æ–µ ‚Äì
–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä–∞. - –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∞–ª–∏–∑—É–µ–º —Ç–∞–∫:
import random
total_tickets = sum(t for _, t in participants)
win_index = random.randrange(total_tickets) # —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ
total_tickets-1
current = 0
winner_id = None
for user_id, tickets in participants:
current += tickets
if win_index < current:
winner_id = user_id
break
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ winner_id ‚Äì –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª—è. –¢–∞–∫–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–∏—Ä–∞–µ—Ç –∏–Ω–¥–µ–∫—Å
—Å–ª—É—á–∞–π–Ω–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ "–±–∏–ª–µ—Ç–Ω—ã—Ö –¥–æ–ª–µ–π" –∏ –Ω–∞—Ö–æ–¥–∏—Ç, –≤ —á–µ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–Ω –ø–æ–ø–∞–ª.
–≠—Ç–æ —Ä–∞–≤–Ω–æ–∑–Ω–∞—á–Ω–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º—É "–º–µ—à–∫—É —Å –±–∏–ª–µ—Ç–∞–º–∏". - –ù–∞–π–¥—è winner_id , –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∏—Ç—å
–¥–∞–Ω–Ω—ã–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–æ—à–µ–ª–µ–∫) –∏–∑ –±–∞–∑—ã: –ª–∏–±–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏–º—è –≤
Users —Ç–∞–±–ª–∏—Ü–µ, –ª–∏–±–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥ Telegram API get_chat –¥–ª—è user_id (–Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ
–¥–µ—Ä–≥–∞—Ç—å API –ª–∏—à–Ω–∏–π —Ä–∞–∑, –ª—É—á—à–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏ /start –∏–º—è). - –†–∞—Å—á–µ—Ç –ø—Ä–∏–∑–æ–≤–æ–≥–æ —Ñ–æ–Ω–¥–∞: –ø–æ
—É—Å–ª–æ–≤–∏—è–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω $10 –ø—Ä–∏–∑. –û—Å—Ç–∞—Ç–æ–∫ = (—Å—É–º–º–∞ –±–∞–Ω–∫–∞ - $10). –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –±—ã–ª–æ —Å–æ–±—Ä–∞–Ω–æ $16,
–æ—Å—Ç–∞—Ç–æ–∫ $6 —É—Ö–æ–¥–∏—Ç –æÔøΩÔøΩ–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º. - –í—ã–ø–ª–∞—Ç–∞ –ø—Ä–∏–∑–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—é: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º $10
–Ω–∞ –∫–æ—à–µ–ª–µ–∫ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è: - –ï—Å–ª–∏ –º—ã –∑–∞—Ä–∞–Ω–µ–µ —Ç—Ä–µ–±–æ–≤–∞–ª–∏ –∫–æ—à–µ–ª–µ–∫ –∏ –æ–Ω –∑–∞–ø–∏—Å–∞–Ω ( winner_wallet =
Users.wallet_address ), –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ. –ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –∫–æ—à–µ–ª–µ–∫ –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω, –º–æ–∂–Ω–æ
–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—é –ª–∏—á–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å –∏ –≤—Ä—É—á–Ω—É—é/–ø–æ–∑–∂–µ
—Å–æ–≤–µ—Ä—à–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É. (–ù–æ –ª—É—á—à–µ –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–≥–æ). - –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å? –ó–¥–µ—Å—å –¥–≤–∞ –ø—É—Ç–∏: 1. –ß–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ
NOWPayments (Mass Payout): NOWPayments API –∏–º–µ–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –º–∞—Å—Å–æ–≤—ã—Ö –≤—ã–ø–ª–∞—Ç –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
–≤Custody-–±–∞–ª–∞–Ω—Å–∞ 6 7 . –ú–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏—Ö API, —á—Ç–æ–±—ã –∏–∑ —Å—Ä–µ–¥—Å—Ç–≤, —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –Ω–∞ –≤–∞—à–µ–º
–∞–∫–∫–∞—É–Ω—Ç–µ, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –Ω–∞ –∞–¥—Ä–µ—Å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è. –û–¥–Ω–∞–∫–æ, –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å
8–≤ custody (—Ç.–µ. –Ω–∞ –±–∞–ª–∞–Ω—Å–µ NOWPayments). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é NOWPayments –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–ª–∞—Ç–µ–∂–µ
–º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –≤–∞—à –≤–Ω–µ—à–Ω–∏–π –∫–æ—à–µ–ª–µ–∫ (–µ—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏
"Outcome wallet"). –ï—Å–ª–∏ –≤—ã –æ—Å—Ç–∞–≤–∏—Ç–µ –∞–≤—Ç–æ-–≤—ã–ø–ª–∞—Ç—É –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–π, —Å—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è
–Ω–∞ –≤–∞—à–µ–º —Å—á–µ—Ç—É NOWPayments, –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º —Å–¥–µ–ª–∞—Ç—å payout –Ω–µ—Å–∫–æ–ª—å–∫–∏–º
–∞–¥—Ä–µ—Å–∞—Ç–∞–º. –≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± —É–¥–æ–±–µ–Ω —Ç–µ–º, —á—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–∞–º–æ–º—É –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Äì –≤—ã
–ø–æ—Ä—É—á–∞–µ—Ç–µ —ç—Ç–æ API. 2. –ß–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫ (–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ): –µ—Å–ª–∏ –≤—ã
–Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ —Å–±–æ—Ä —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å–≤–æ–π –∫–æ—à–µ–ª–µ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–∫–∞–∑–∞–≤ –∞–¥—Ä–µ—Å–∞ –≤ .env, –∏ NOWPayments
–ø—Ä–∏—Å—ã–ª–∞–ª –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä—è–º–æ —Ç—É–¥–∞), —Ç–æ–≥–¥–∞ –∫ –º–æ–º–µ–Ω—Ç—É —Ä–æ–∑—ã–≥—Ä—ã—à–∞ –≤—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏
–Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ –≤–∞—à–µ–º –∫–æ—à–µ–ª—å–∫–µ. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –±–æ—Ç (–∏–ª–∏ –≤—ã –≤—Ä—É—á–Ω—É—é) –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É
$10 –ø–æ–±–µ–¥–∏—Ç–µ–ª—é. –ß—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –±–æ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É
–∫–æ—à–µ–ª—å–∫–∞, –æ—Ç–∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–∑. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ç—å Tron (TRX –∏–ª–∏ USDT-TRC20),
–º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É TronPy –∏–ª–∏ NOWNodes API, —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
–ø–µ—Ä–µ–≤–æ–¥–∞ 10 USDT –Ω–∞ –∞–¥—Ä–µ—Å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –∏ –ø–æ–¥–ø–∏—Å–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º (—Ö—Ä–∞–Ω—è—â–∏–º—Å—è –≤ .env).
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–æ–π —Å–µ—Ç–∏: Ethereum/BSC (Web3.py), etc. –≠—Ç–æ—Ç –ø—É—Ç—å —Ç—Ä–µ–±—É–µ—Ç —Å–∏–ª—å–Ω–æ–π
–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–∞ –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å.
–í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–ª—É—á–∏–ª–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞.
–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –≤—ã –æ—Ç–∫–ª—é—á–∏–ª–∏ –∞–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥ –≤ NOWPayments, –∏ —Å—Ä–µ–¥—Å—Ç–≤–∞
–Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è —Ç–∞–º ‚Äì —Ç–æ–≥–¥–∞ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏—Ö –º–µ—Ç–æ–¥ *Create Payout*: —É–∫–∞–∑–∞—Ç—å
–≤–∞–ª—é—Ç—É, —Å—É–º–º—É, –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è. NOWPayments –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–µ—Ä–µ–≤–æ–¥ (—Å –∫–∞–∫–æ–π-—Ç–æ
–∫–æ–º–∏—Å—Å–∏–µ–π) –∏ —Å–æ–æ–±—â–∏—Ç —Å—Ç–∞—Ç—É—Å. –õ–∏–±–æ, –µ—Å–ª–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ —É–∂–µ –Ω–∞ –≤–∞—à–µ–º –∫–æ—à–µ–ª—å–∫–µ, ‚Äî
–±–æ—Ç —Å–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç.
–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `payments.send_prize(winner_address,
amount)`. –í–Ω—É—Ç—Ä–∏ –Ω–µ—ë –ª–∏–±–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–µ–º—É API (NowPayments Payout) —Å
–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è API-–∫–ª—é—á–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ .env), ÔøΩÔøΩ–∏–±–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Web3/TronPy –¥–ª—è –ø—Ä—è–º–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º. –í –æ–±–æ–∏—Ö
—Å–ª—É—á–∞—è—Ö, **—É–±–µ–¥–∏—Ç–µ—Å—å –≤ —É—Å–ø–µ—Ö–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** (–ø–æ–ª—É—á–∏—Ç—å txid, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
–≤ —Å–µ—Ç–∏). –í —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏ ‚Äì –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å (–∏–ª–∏ —Å–æ–æ–±—â–∏—Ç—å
–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É).
‚Ä¢ –ü–µ—Ä–µ–≤–æ–¥ –æ—Å—Ç–∞—Ç–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ ( total_collected - 10 USD )
–Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –∫–æ—à–µ–ª—å–∫–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ .env. –ï—Å–ª–∏ –∫–æ—à–µ–ª—å–∫–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ, —Ä–µ—à–∏—Ç–µ,
–∫–∞–∫ –¥–µ–ª–∏—Ç—å —Å—É–º–º—É ‚Äì –ø–æ—Ä–æ–≤–Ω—É –∏–ª–∏ –ø–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–≤–∞ –∫–æ—à–µ–ª—å–∫–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
–ø–æ –ø–æ–ª–æ–≤–∏–Ω–µ –æ—Å—Ç–∞—Ç–∫–∞ –∫–∞–∂–¥–æ–º—É. –ò–ª–∏ –æ–¥–∏–Ω –∫–æ—à–µ–ª–µ–∫ ‚Äì —Ç–æ–≥–¥–∞ –≤—Å—é —Å—É–º–º—É –Ω–∞ –Ω–µ–≥–æ (–µ—Å–ª–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞
–Ω–∞ NOWPayments, —Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–Ω–∏ —É–∂–µ –≤–∞—à–∏, –º–æ–∂–Ω–æ –∏–ª–∏ –≤—ã–≤–µ—Å—Ç–∏ –∏—Ö –Ω–∞ —Å–≤–æ–π –∫–æ—à–µ–ª–µ–∫,
–∏–ª–∏ –µ—Å–ª–∏ –æ–Ω–∏ –∏ —Ç–∞–∫ –Ω–∞ –≤–∞—à–µ–º –∫–æ—à–µ–ª—å–∫–µ ‚Äì —Ç–µ–º –±–æ–ª–µ–µ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω–∞–¥–æ). –°—Ü–µ–Ω–∞—Ä–∏–∏:
‚ó¶ –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ NOWPayments custody: –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ $10 –ø–æ–±–µ–¥–∏—Ç–µ–ª—é
–æ—Å—Ç–∞–Ω–µ—Ç—Å—è, —Å–∫–∞–∂–µ–º, $6 –Ω–∞ –±–∞–ª–∞–Ω—Å–µ. –í—ã –º–æ–∂–µ—Ç–µ –ª–∏–±–æ —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ Mass Payout
–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–∏ $6 –Ω–∞ —Å–≤–æ–π –∫–æ—à–µ–ª–µ–∫ (–∞–¥—Ä–µ—Å –∏–∑ .env), –ª–∏–±–æ —á–µ—Ä–µ–∑ Dashboard –≤—Ä—É—á–Ω—É—é
–≤—ã–≤–µ—Å—Ç–∏. –ú–æ–∂–Ω–æ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–∑–≤–∞—Ç—å
payments.send_profit(owner_addresses, amount) , –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç —Å–ø–∏—Å–æ–∫
–≤–∞—à–∏—Ö –∞–¥—Ä–µ—Å–æ–≤ –∏ —Å–æ–∑–¥–∞–µ—Ç –≤—ã–ø–ª–∞—Ç—ã.
‚ó¶ –ü—Ä–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –∫–æ—à–µ–ª—å–∫–µ: –µ—Å–ª–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤—Å—ë –≤—Ä–µ–º—è –±—ã–ª–∏ –Ω–∞ –≤–∞—à–µ–º –∫–æ—à–µ–ª—å–∫–µ
(–ø—Ä–∏–∑ –≤—ã –æ—Ç–¥–∞–ª–∏ –∏–∑ –Ω–∏—Ö), —Ç–æ –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ —Å—É—Ç–∏ —É–∂–µ —É –≤–∞—Å ‚Äì –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –Ω–∏–∫—É–¥–∞ –Ω–µ –Ω–∞–¥–æ.
–ù–æ –µ—Å–ª–∏ –≤—ã –¥–µ—Ä–∂–∞–ª–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–±–æ—Ä–Ω–æ–º –∫–æ—à–µ–ª—å–∫–µ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ
–æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø—Ä–∏–∑, –º–æ–∂–Ω–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤–µ—Å—å –Ω—É–ª–µ–≤–æ–π –æ—Å—Ç–∞—Ç–æ–∫? –ó–¥–µ—Å—å,
–≤–µ—Ä–æ—è—Ç–Ω–æ, –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ï—Å–ª–∏ –∂–µ —Å–±–æ—Ä –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ
–æ–±—â–µ–º –∫–æ—à–µ–ª—å–∫–µ (–Ω–µ –ø—Ä—è–º–æ –≤–∞—à–µ–º –æ—Å–Ω–æ–≤–Ω–æ–º), —Ç–æ –º–æ–∂–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–∏–∑–∞ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ
9–æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –ª–∏—á–Ω—ã–π –∫–æ—à–µ–ª–µ–∫, —á—Ç–æ–±—ã –Ω–µ –¥–µ—Ä–∂–∞—Ç—å –∏—Ö –Ω–∞ –∞–¥—Ä–µ—Å–µ –±–æ—Ç–∞. –≠—Ç–æ
–≤–æ–ø—Ä–æ—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –ª—É—á—à–µ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–µ–Ω—å–≥–∏ –Ω–∞ –±–æ—Ç–µ –¥–æ–ª—å—à–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ.
‚Ä¢ –§–∏–∫—Å–∞—Ü–∏—è —Ä–µÔøΩÔøΩ—É–ª—å—Ç–∞—Ç–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞: –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
—Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–º–µ—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ä–∞—É–Ω–¥ –∫–∞–∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π. –í –±–∞–∑–µ Lottery –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
status = 'completed' , winner_user_id = –ø–æ–±–µ–¥–∏—Ç–µ–ª—å , completed_time = now() .
–ú–æ–∂–ΩÔøΩÔøΩ –∑–∞–ø–∏—Å–∞—Ç—å, –∫—Ç–æ –≤—ã–∏–≥—Ä–∞–ª –∏ —Å –∫–∞–∫–æ–π —Å—É–º–º–æ–π, –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏.
‚Ä¢ –î–∞–ª–µ–µ –æ–±–Ω—É–ª–µ–Ω–∏–µ: –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –∫—É–ø–ª–µ–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã, —Ç.–∫. –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å
–ø—É—Å—Ç—ã–º –±–∞–Ω–∫–æ–º. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—É Entries —Å lottery_id, —Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ
–Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å Lottery –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞, –∞ —Å—Ç–∞—Ä—É—é –æ—Å—Ç–∞–≤—å—Ç–µ. –ï—Å–ª–∏ —Ö—Ä–∞–Ω–∏—Ç–µ —Å—á—ë—Ç—á–∏–∫–∏ —É Users,
—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ storage.reset_tickets() . –ö–∞–∫ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å, —ç—Ç–æ, –ø–æ —Å—É—Ç–∏,
UPDATE Users SET tickets=0 . –î–ª—è –º–∏–ª–ª–∏–æ–Ω–æ–≤ –∑–∞–ø–∏—Å–µ–π —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–π–º–µ—Ç –≤—Ä–µ–º—è, –Ω–æ
—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é —ç—Ç–æ –Ω–µ —Å—Ç—Ä–∞—à–Ω–æ. –ß—Ç–æ–±—ã –Ω–µ —Ç–æ—Ä–º–æ–∑–∏—Ç—å –±–æ—Ç–∞ –Ω–∞–¥–æ–ª–≥–æ, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–±—Ä–æ—Å
–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ: –ª–∏–±–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –ª–∏–±–æ –¥–∞–∂–µ –æ—Ç–ª–æ–∂–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç
(–ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π). –ü–æ–∫–∞ —Å–±—Ä–æ—Å –Ω–µ —Å–¥–µ–ª–∞–Ω, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ ‚Äì
–ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å, —á—Ç–æ–±—ã —ç—Ç–∏ —Å—Ç–∞—Ä—ã–µ –±–∏–ª–µ—Ç—ã —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –≤ –Ω–æ–≤–æ–º —Ä–∞—É–Ω–¥–µ.
–ü–æ—ç—Ç–æ–º—É –ª—É—á—à–µ –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ä–∞–∑—É.
‚Ä¢ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: –ø–æ—Å–ª–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∞ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Å–º.
—Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª), —á—Ç–æ–±—ã –æ–±—ä—è–≤–∏—Ç—å –∏—Ç–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
–§—É–Ω–∫—Ü–∏—è draw_lottery –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —ç—Ç–∏ —à–∞–≥–∏. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –±–ª–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π:
–ø—Ä–∏ –ª—é–±–æ–º —Å–±–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–±–æ–π API, –æ—à–∏–±–∫–∞ –ë–î –∏ —Ç.–¥.) –≤–∞–∂–Ω–æ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É –∏ –ø–æ
–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≤ –ø–æ–¥–≤–µ—à–µ–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø—Ä–∏–∑ –Ω–µ —É–¥–∞–ª–æ—Å—å
–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –º–æ–∂–Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞—É–Ω–¥, –∞ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å
–ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å–≤—è–∑–∞—Ç—å—Å—è –¥–ª—è –≤—Ä—É—á–µ–Ω–∏—è –ø—Ä–∏–∑–∞ (manually). –¢–∞–∫–∏–µ —Å–ª—É—á–∞–∏ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω—ã, –Ω–æ –Ω–∞–¥–æ –±—ã—Ç—å
–≥–æ—Ç–æ–≤—ã–º.
–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ —á–µ—Å—Ç–Ω–æ—Å—Ç—å: –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ–≤–µ—Ä–∏—è, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—É–±–ª–∏–∫—É—é—Ç,
–∫–∞–∫ –±—ã–ª –ø–æ–ª—É—á–µ–Ω —Å–ª—É—á–∞–π–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, random seed –∏–ª–∏ —Ö–µ—à –±–ª–æ–∫–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ.
–ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è, –≤–∑—è–≤ seed –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä,
–ø–æ—Å–ª–µ–¥–Ω–∏–π –±–ª–æ–∫ Bitcoin –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–æ–∑—ã–≥—Ä—ã—à–∞) ‚Äì –Ω–æ —ç—Ç–æ —Å–ª–æ–∂–Ω–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ù–∞
–ø–µ—Ä–≤—ã—Ö –ø–æ—Ä–∞—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä. –ì–ª–∞–≤–Ω–æ–µ ‚Äì –∏—Å–∫–ª—é—á–∏—Ç—å
—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä. –ë–æ—Ç —Å–∞–º —Å–ª—É—á–∞–π–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è, –∏ —Å—Ä–∞–∑—É –æ–±—ä—è–≤–ª—è–µ—Ç, —á—Ç–æ
—É—Å–∏–ª–∏–≤–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ (–Ω–∏–∫–∞–∫–∏—Ö ¬´–ø–æ–¥—Ç–∞—Å–æ–≤–æ–∫¬ª). –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —É–∑–Ω–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑
–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞.
–û—Ç–º–µ—Ç–∏–º, —á—Ç–æ –±–æ—Ç –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é,
–¥–∞–∂–µ –µ—Å–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–≤–ª–µ—á—ë–Ω ‚Äì —Ç–æ –µ—Å—Ç—å "—Å—á–∞—Å—Ç–ª–∏–≤—ã–π —á–µ—Ç–≤–µ—Ä–≥" –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑
–≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–µ—Å—Ç–Ω–æ—Å—Ç–∏. –ú—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é
–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ APScheduler///

–û–ø–æ–≤–µ—â–µ–Ω–∏–µ - –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å 3 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ -
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ —Å –Ω–∞–¥–ø–∏—Å—å—é –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –∫—Ä–∞—Ç–∫–∏–º –æ–±—å—è—Å–Ω–µ–Ω–∏–µ–º –±–æ—Ç–∞ —Å –ø–æ–∂–µ–ª–∞–Ω–∏–µ–º —É–¥–∞—á–∏ –∏ –≤–µ—Å–µ–ª—ã–º–∏ –ø–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–º–∞–π–ª–∏–∫–∞–º–∏.
–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤—ã–π–≥—Ä—ã—à–∞ —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ–±–µ–¥–Ω–æ–≥–æ —Ö—ç—à–∞ –±–∏—Ç–∫–æ–π–Ω–∞ –∏ —á–∞—Å—Ç–∏—á–Ω–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¢–ì (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–æ—á–∫–∞–º–∏ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ),
–∞ —Ç–∞–∫ –∂–µ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ –±–∞–Ω–∫–∞ —Å –æ–±—å—è—Å–Ω–µ–Ω–∏–µ–º —á—Ç–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–±—Ä–∞–Ω –±–∞–Ω–∫ –∏ –ø–æ–∂–µ–ª–∞–Ω–∏–µ–º —É–¥–∞—á–∏ –≤ —Å–ª–µ–¥. —Ü–∏–∫–ª–µ

–í–°–ï –ö–ù–û–ü–ö–ò –ò –û–ü–ò–°–ê–ù–ò–Ø –î–û–õ–ñ–ù–´ –ë–´–¢–¨ –î–û–°–¢–£–ü–ù–´–ú–ò –ù–ê 4–• –Ø–ó–´–ö–ê–• (–ê–ù–ì–õ.–ò–°–ü–ê–ù.–ü–û–†–¢–£–ì.–§–†–ê–ù–¶.)

–•–æ—Å—Ç–∏–Ω–≥ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–æ—Ç–∞
–î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–º 24/7. –ù–∞ —ç—Ç–∞–ø–µ
—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã, –≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ. –ù–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–π
—Ö–æ—Å—Ç–∏–Ω–≥. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Telegram-–±–æ—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–∏–±–æ –æ–±–ª–∞—á–Ω—ã–µ VPS
(–Ω–∞–ø—Ä–∏–º–µ—Ä, DigitalOcean, AWS EC2, Google Cloud VM, VDS –ø—ÄÔøΩÔøΩ–≤–∞–π–¥–µ—Ä—ã), –ª–∏–±–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤—Ä–æ–¥–µ
Heroku (—Ç–µ–ø–µ—Ä—å –ø–ª–∞—Ç–Ω—ã–π) –∏–ª–∏ –µ—ë –∞–Ω–∞–ª–æ–≥–∏. –ì–ª–∞–≤–Ω–æ–µ ‚Äì –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é —Ä–∞–±–æ—Ç—É. –ö–∞–∫
–æ—Ç–º–µ—á–∞–µ—Ç—Å—è –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞—Ö, –∫–æ–¥ –Ω–∞–ø–∏—Å–∞—Ç—å ‚Äì —ç—Ç–æ –ø–æ–ª–¥–µ–ª–∞, –Ω–∞–¥–æ –µ—â–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º
—Ö–æ—Å—Ç–∏–Ω–≥–µ, —á—Ç–æ–±—ã –æ–Ω —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–ª 24/7 8 . –í –æ–¥–Ω–æ–º –∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∞–≤—Ç–æ—Ä –≤—ã–±—Ä–∞–ª Amverum
Cloud (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π –∞–Ω–∞–ª–æ–≥ Heroku) –¥–ª—è –¥–µ–ø–ª–æ—è, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π —Å–µ—Ä–≤–µ—Ä 9 .
–ß—Ç–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ö–æ—Å—Ç–∏–Ω–≥–∞: - –ë–æ—Ç—É –Ω—É–∂–µ–Ω –≤—ã—Ö–æ–¥ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ API
Telegram –∏ API –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª—é–±–æ–π VPS —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç. - –ï—Å–ª–∏ –≤—ã
–ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è webhook (Telegram –º–æ–∂–µ—Ç —Å–∞–º –ø—Ä–∏—Å—ã–ª–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –≤–∞—à URL
–≤–º–µ—Å—Ç–æ polling), —Ç–æ –Ω—É–∂ÔøΩÔøΩ–Ω –¥–æ—Å—Ç—É–ø–Ω—ã–π –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ URL –∏ SSL-—Å–µ—Ä—ÇÔøΩÔøΩ—Ñ–∏–∫–∞—Ç. –û–¥–Ω–∞–∫–æ, —Å—É–¥—è –ø–æ –ª–æ–≥–∞–º,
–≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ polling (Aiogram dispatcher polling). Polling —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–æ–ø. –Ω–∞—Å—Ç—Ä–æ–µ–∫,
–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ—Å—Ç—É–ø–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. - –î–ª—è IPN NOWPayments: –µ—Å–ª–∏ –≤—ã —Ä–µ—à–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IPN-
13—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π POST-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç
NOWPayments. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 8000) –∏
–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –∏–ª–∏ —Ö–æ—Ç—è –±—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP. NOWPayments –ø–æ–∑–≤–æ–ª—è–µ—Ç
—É–∫–∞–∑–∞—Ç—å IPN URL, –Ω–∞–ø—Ä–∏–º–µ—Ä http://yourserver:8000/ipn . –ï—Å–ª–∏ –Ω–∞ VPS —ç—Ç–æ –æ—Ç–∫—Ä—ã—Ç–æ ‚Äì —Ö–æ—Ä–æ—à–æ,
–Ω–æ –ª—É—á—à–µ –∑–∞ reverse proxy. –í –æ–±—â–µ–º, –ø–ª–∞–Ω–∏—Ä—É—è IPN, –ø—Ä–æ—â–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ, —á—Ç–æ –∏
–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏ –ø—Ä–æ–∫–∏–Ω—É—Ç—å –ø–æ—Ä—Ç 8000 –Ω–∞—Ä—É–∂—É. - –í Aiogram 3 –º–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å FastAPI
–∏–ª–∏ Aiohttp –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–º. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é asyncio.create_task(runner.setup() –∫–∞–∫
—É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å. –ï—Å–ª–∏ —ç—Ç–æ —Å–ª–æ–∂–Ω–æ, –º–æ–∂–Ω–æ –≤–º–µ—Å—Ç–æ IPN –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å polling –ø–ª–∞—Ç–µ–∂–µ–π (–∫–∞–∫
–æ–ø–∏—Å—ã–≤–∞–ª–æ—Å—å), —Ç–æ–≥–¥–∞ –≤–Ω–µ—à–Ω–∏–π –≤–µ–±-–¥–æ—Å—Ç—É–ø –Ω–µ –Ω—É–∂–µ–Ω. - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
(.env) –±–µ–∑–æ–ø–∞—Å–Ω–æ. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –õ—É—á—à–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–º–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞ (–º–Ω–æ–≥–∏–µ PaaS –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–¥–∞–≤–∞—Ç—å ENV VARs —á–µ—Ä–µ–∑
–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å). –ù–∞ VPS –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç–µ .env —Ñ–∞–π–ª –∏ –Ω–µ –¥–∞–≤–∞–π—Ç–µ –∫ –Ω–µ–º—É –¥–æ—Å—Ç—É–ø –∏–∑–≤–Ω–µ. -
–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã: –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å –±–æ—Ç–∞ —Å–ø—Ä–∞–≤–∏—Ç—Å—è —Å –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π
–∞—É–¥–∏—Ç–æ—Ä–∏–µ–π, –µ—Å–ª–∏ –æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω (async, –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏–π). Telegram API –º–æ–∂–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å
—Ç—ã—Å—è—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–æ –≥–ª–∞–≤–Ω–æ–µ ‚Äì –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (Aiogram —ç—Ç–æ –¥–µ–ª–∞–µ—Ç). –ë–æ—Ç ‚Äì –ø–æ
—Å—É—Ç–∏ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å (–∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ø–∏–π)
Telegram-–±–æ—Ç–∞ –Ω–µ–ª—å–∑—è –±–µ–∑ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –≤—Ä—É—á–Ω—É—é (–∏–Ω–∞—á–µ –∫–æ–ø–∏–∏ –±—É–¥—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã).
–ü–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ–º–æ—â–Ω–µ–µ, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2 CPU, 4GB RAM ‚Äì
—ç—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ –¥–µ—Å—è—Ç–∫–∏ —Ç—ã—Å—è—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ª–µ–≥–∫–æ; –µ—Å–ª–∏ –º–∏–ª–ª–∏–æ–Ω—ã ‚Äì –º–æ–∂–µ—Ç 4 CPU). –û—Å–Ω–æ–≤–Ω–∞—è
–Ω–∞–≥—Ä—É–∑–∫–∞ –±—É–¥–µ—Ç –æ—Ç: - –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API (NOWPayments, –ë–î) ‚Äì —Ç—É—Ç –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã —Å–µ—Ç—å –±—ã–ª–∞
–±—ã—Å—Ç—Ä–æ–π. - –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚Äì –ø—Ä–∏ –º–∏–ª–ª–∏–æ–Ω–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—É—é –°–£–ë–î
(Managed PostgreSQL), —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–ø—Ä–æ—Å—ã –±—ã–ª–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã. SQLite –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
VPS –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å –∏ —Ä–∏—Å–∫–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä–µ–π –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∫—Ä—ç—à–∞—Ö. - –û—Ç–ø—Ä–∞–≤–∫–∏
—Å–æ–æ–±—â–µ–Ω–∏–π ‚Äì Telegram –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –Ω–æ —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, —Ç–∞–∫ —á—Ç–æ CPU –Ω–µ
—Å–∏–ª—å–Ω–æ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç, —Å–∫–æ—Ä–µ–µ —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ –ª–∏–º–∏—Ç—ã Telegram. –†–∞–∑–æ—Å–ª–∞—Ç—å 1 –º–ª–Ω —Å–æ–æ–±—â–µ–Ω–∏–π –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
–Ω–µ –≤—ã–π–¥–µ—Ç, –Ω–æ –Ω–∞–º —ç—Ç–æ –∏ –Ω–µ –Ω—É–∂–Ω–æ (–º—ã —à–ª–µ–º 1-2 —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –≤ –∫–∞–Ω–∞–ª, –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞
–∫–æ–º–∞–Ω–¥—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É). - –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ: –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞—Ç—å systemd-—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –±–æ—Ç–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏
–ø–∞–¥–µ–Ω–∏–∏. –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: –Ω–∞–ø–∏—Å–∞—Ç—å Dockerfile, –∑–∞–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏
–∑–∞–ø—É—Å–∫–∞—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ Docker (–≤–æ–∑–º–æ–∂–Ω–æ, orchestrator —Ç–∏–ø–∞ Docker Compose –∏–ª–∏ Kubernetes, –Ω–æ —ç—Ç–æ
–∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –±–æ—Ç–∞). - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞: –¥–µ—Ä–∂–∏—Ç–µ –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (git). –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–µ–ø–ª–æ–π: –ª–∏–±–æ –≤—Ä—É—á–Ω—É—é git pull + –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, –ª–∏–±–æ CI/CD, –ª–∏–±–æ –µ—Å–ª–∏ Heroku ‚Äì
git push, –æ–Ω —Å–∞–º –¥–µ–ø–ª–æ–∏—Ç. - –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (—Ñ–∞–π–ª –ª–æ–≥–æ–≤ –∏–ª–∏
–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–∞–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π —á–∞—Ç). –û—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π: –µ—Å–ª–∏ –≤–¥—Ä—É–≥ —á—Ç–æ-—Ç–æ –Ω–µ —É–¥–∞–ª–æ—Å—å
‚Äì –≤—ã –¥–æ–ª–∂–Ω—ã —É–∑–Ω–∞—Ç—å. –ú–æ–∂–Ω–æ –¥–∞–∂–µ –∑–∞–≤–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π Telegram —á–∞—Ç, –∫—É–¥–∞ –±–æ—Ç (–¥–ª—è –≤–∞—Å, –∫–∞–∫ –∞–¥–º–∏–Ω–∞)
–±—É–¥–µ—Ç —Å–ª–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "‚ö† –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–∑–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è
–≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ!"). –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ.
–í—ã–±–æ—Ä —Å–µ—Ç–∏ –∏ –∫–æ–º–∏—Å—Å–∏—è: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ –¥–ª—è –±–∏–ª–µ—Ç–æ–≤/–ø—Ä–∏–∑–∞ –∏–º–µ–µ—Ç
–Ω–∏–∑–∫–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, Tron (TRC20 USDT) ‚Äì —Ö–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä: –∫–æ–º–∏—Å—Å–∏—è
–∫–æ–ø–µ–µ—á–Ω–∞—è, $0.1 –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å. Ethereum ‚Äì –ø–ª–æ—Ö–æ–π –≤—ã–±–æ—Ä, —Ç.–∫. –∫–æ–º–∏—Å—Å–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã—à–µ
$0.1, —ç—Ç–æ —Å–¥–µ–ª–∞–µ—Ç —É—á–∞—Å—Ç–∏–µ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º. BSC –ø–æ–ª—É—á—à–µ, –Ω–æ —Ç–æ–∂–µ –º–æ–∂–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ü–µ–Ω—Ç–æ–≤ –±—Ä–∞—Ç—å.
Solana –∏–ª–∏ Tron ‚Äì –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ. –ú–Ω–æ–≥–∏–µ –±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Tron –∏–ª–∏ Binance Smart Chain –¥–ª—è
–º–∏–∫—Ä–æ–ø–ª–∞—Ç–µ–∂–µ–π.
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º "–≤ –ø—Ä–æ–¥–∞–∫—à–Ω" –ø—Ä–æ–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö
—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤: - –ò–º–∏—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (–º–æ–∂–Ω–æ –≤ NOWPayments –≤–∫–ª—é—á–∏—Ç—å sandbox API –∏
–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–ª—ã–µ —Å—É–º–º—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏). -
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—á—ë–ª –±–∏–ª–µ—Ç. - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Ä–æ–∑—ã–≥—Ä—ã—à–∞
(–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É –∞–¥–º–∏–Ω–∞ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –ø–æ—Ä–æ–≥ = 0.1 –¥–ª—è —Ç–µ—Å—Ç–∞) ‚Äì —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ
–≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—å, –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∏ —á—Ç–æ –±–∏–ª–µ—Ç—ã –æ–±–Ω—É–ª—è—é—Ç—Å—è. - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ
14–ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ (ÔøΩÔøΩ–æ–≥–¥–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ) ‚Äì —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –∏ –Ω–∞ —Å–ª–µ–¥. –∏—Ç–µ—Ä–∞—Ü–∏—é (–º–æ–∂–Ω–æ
–≤—Ä—É—á–Ω—É—é –≤—ã–∑–≤–∞—Ç—å —Å–Ω–æ–≤–∞) –±–æ—Ç –ø–æ–º–Ω–∏—Ç —Å—Ç–∞—Ä—ã–µ –±–∏–ª–µ—Ç—ã. - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–µ–π: –ø–æ–ø—Ä–æ–±—É–π—ÇÔøΩÔøΩ
—Å—Ü–µ–Ω–∞—Ä–∏–π: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª –∞–¥—Ä–µ—Å, –Ω–æ –Ω–µ –∑–∞–ø–ª–∞—Ç–∏–ª –≤–æ–≤—Å–µ ‚Äì –±–æ—Ç —á–µ—Ä–µ–∑ N ÔøΩÔøΩ–∏–Ω—É—Ç —Å–∫–∞–∑–∞–ª "–Ω–µ
–ø–æ–ª—É—á–µ–Ω–æ". –ó–∞—Ç–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å—ë –∂–µ –æ—Ç–ø—Ä–∞–≤–∏–ª –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É –Ω–∞ —Ç–æ—Ç –∞–¥—Ä–µ—Å (–ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞). –í
–∏–¥–µ–∞–ª–µ, –±–æ—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω –∑–∞—Å–µ—á—å –ø—Ä–∏—Ö–æ–¥ (IPN –ø—Ä–∏–¥—ë—Ç –≤—Å–µ —Ä–∞–≤–Ω–æ, —Ö–æ—Ç—å –∏ —Å –æ–ø–æ–∑–¥–∞–Ω–∏–µ–º).
–ü–æ–∑–∞–±–æ—Ç—å—Ç–µ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–æ: –¥–∞–∂–µ –µ—Å–ª–∏ —É–∂–µ —É–≤–µ–¥–æ–º–∏–ª–∏ –æ –Ω–µ—É–¥–∞—á–µ, –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–∂–µ –Ω–∞—á–∏—Å–ª–∏—Ç–µ –±–∏–ª–µ—Ç
–∏ —Å–æ–æ–±—â–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—Ç–æ –±–∏–ª–µ—Ç –≤—Å—ë –∂–µ –ø–æ–ª—É—á–µ–Ω. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –ø–æ—Ç–µ—Ä—é —Å—Ä–µ–¥—Å—Ç–≤ —É—á–∞—Å—Ç–Ω–∏–∫–∞.
–õ–∏–±–æ –º–æ–∂–Ω–æ —É–¥–ª–∏–Ω–∏—Ç—å –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –¥–æ —Ä–∞–∑—É–º–Ω–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞.
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env –∏ —Ñ–∞–π–ª–æ–≤: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤
.env
–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: -
API_TOKEN —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞. - NOWPAYMENTS_API_KEY –∏ –≤–æ–∑–º–æ–∂–Ω–æ NOWPAYMENTS_IPN_SECRET . -
–ê–¥—Ä–µ—Å–∞ –≤–∞—à–∏—Ö –∫–æ—à–µ–ª—å–∫–æ–≤: –≤–æ–∑–º–æ–∂–Ω–æ, –≤ –≤–∏–¥–µ
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∫–æ—à–µ–ª—å–∫–∞:
OWNER_WALLETS=addr1,addr2,... . - –ï—Å–ª–∏
PRIVATE_KEY=
(–Ω–æ —ç—Ç–æ –æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ .env –Ω–∞
—Å–µ—Ä–≤–µÔøΩÔøΩ–µ, —Ö–æ—Ç—è –∫—É–¥–∞ –¥–µ–≤–∞—Ç—å—Å—è ‚Äì —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å, –Ω–æ —É—Å–ª–æ–∂–Ω–∏—Ç). -DB_URL
–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–æ–±—ä—è–≤–ª–µ–Ω–∏–π:
–∫
–ë–î,
–∏–ª–∏
–ø—É—Ç—å
–¥–ª—è
SQLite.
-

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –¥–µ–ø–ª–æ—è –∏ —Ç–µ—Å—Ç–æ–≤ –≤–∞—à –±–æ—Ç –±—É–¥–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –∑–∞–¥—É–º–∞–Ω–æ. –û–Ω –æ–¥–Ω–∞–∂–¥—ã
–Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Äì –∏ –¥–∞–ª–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–¥–µ–ª–∞–µ–º "—Ä–∞–∑ –∏ –Ω–∞–≤—Å–µ–≥–¥–∞", –∫–∞–∫ –≤—ã —Å–∫–∞–∑–∞–ª–∏). –ì–ª–∞–≤–Ω–æ–µ,
–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞—Ö–æ—Ç–∏—Ç–µ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–∏–∑ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥) ‚Äì
—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ª–æ–≥–∏–∫—É –î–û–õ–ñ–ù–û –ë–´–¢–¨ –õ–ï–ì–ö–û –ò –ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û –ë–ï–ó –ü–†–û–ë–õ–ï–ú
–í –∑–∞–∫–ª—é—á–µ–Ω–∏–µ, –ø–æ–¥–æ–±–Ω—ãÔøΩÔøΩ –ø—Ä–æ–µ–∫—Ç —Å–æ—á–µ—Ç–∞–µ—Ç –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å Telegram API, –±–ª–æ–∫—á–µ–π–Ω-–ø–ª–∞—Ç–µ–∂–∞–º–∏ –∏
–±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –ú—ã —É—á–ª–∏ –æ–ø—ã—Ç —É—Å–ø–µ—à–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–∏—ë–º –ø–ª–∞—Ç–µ–∂–µ–π
—á–µ—Ä–µ–∑ –ø—Ä–æÔøΩÔøΩ–µ—Ä–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∏—Å–ø–æ–ª—å–∑—É–µ–º ORM –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏, –≤–Ω–µ–¥—Ä–∏–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
APScheduler –¥–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á  , —á—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –Ω–∞–¥–µ–∂–Ω–µ–µ, —á–µ–º –ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –¥–µ–Ω—å
–Ω–µ–¥–µ–ª–∏ –≤—Ä—É—á–Ω—É—é, –∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π
—Ä–∞–±–æ—Ç—ã . –° —Ç–∞–∫–∏–º –ø–æ–¥—Ö–æ–¥–æ–º –≤–∞—à –±–æ—Ç CryptoLuck –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–æ–≤–æ–¥—è —á–µ—Å—Ç–Ω—ã–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∏ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é.